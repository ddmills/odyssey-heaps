package data;

import common.struct.IntPoint;

class BitmaskMap
{
	static var IDX_MAP = [
		[
			[],
			[2, 3, 6, 7, 34, 39, 134, 163],
			[86, 87, 118, 119, 243],
			[214, 246, 215, 247],
			[210, 211, 242, 243],
			[80, 84, 112],
			[]
		],
		[
			[16, 20, 52, 144, 148, 149, 176, 180],
			[18, 19, 146, 179],
			[91],
			[127],
			[248, 249, 252, 253],
			[26, 58, 154],
			[64, 65, 68, 96, 192, 193, 196, 224, 228]
		],
		[
			[30, 62, 158, 190],
			[],
			[90],
			[75, 79, 203],
			[126],
			[222],
			[208, 209, 212, 213, 240, 241, 244, 245]
		],
		[
			[31, 63, 159, 191],
			[254],
			[216, 217, 220, 221],
			[22, 23, 54, 55, 150, 151, 182, 183],
			[223],
			[251],
			[120, 121, 124, 125]
		],
		[[27, 59, 155], [107, 235, 239, 111], [122], [95], [255], [226, 250], [92]],
		[
			[10, 14, 42],
			[83, 82],
			[94],
			[219],
			[123],
			[104, 105, 108, 109, 232, 236, 233],
			[24, 25, 28, 29, 56, 57, 61, 152, 157, 184, 185, 189]
		],
		[
			[0, 1, 4, 32, 33, 36, 128, 129, 132, 133, 160, 164, 161, 165],
			[8, 9, 13, 40, 41, 44, 45, 169],
			[11, 43, 47, 15, 143],
			[106, 110, 234, 238],
			[26, 206],
			[40, 66, 67, 70, 71, 99, 194, 195, 198, 199, 230, 231],
			[72, 73, 77, 200, 201, 204]
		]
	];

	public static function getTilePos(mask:Int):IntPoint
	{
		for (y in 0...IDX_MAP.length)
		{
			var row = IDX_MAP[y];
			for (x in 0...row.length)
			{
				if (row[x].contains(mask))
				{
					return {
						x: x,
						y: y,
					};
				}
			}
		}

		return {
			x: 0,
			y: 0,
		};
	}
}
